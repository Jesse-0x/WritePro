(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7713)}])},7713:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return x}});var t=n(5893),o=n(5675),s=n.n(o),a=n(9008),i=n.n(a),l=n(6154);let c="";function d(e,r){return new Promise((n,t)=>{l.Z.post(e,r,{timeout:6e5}).then(e=>{n(e.data)}).catch(e=>{console.log(e),t(e)})})}c="",l.Z.interceptors.response.use(e=>e,e=>Promise.reject(e)),l.Z.interceptors.request.use(e=>(e.headers["Content-Type"]="application/json;charset=UTF-8",e.headers.Accept="application/json",e.baseURL=c,e.timeout=6e5,e),e=>Promise.reject(e));var u=n(7294),p=n(5529);function h(e){let r,n;r="spelling"==e.correctionType?"Spelling mistake":"grammar"==e.correctionType?"Grammar mistake":"punctuation"==e.correctionType?"Punctuation mistake":"tone"==e.correctionType?"Tone mistake":"logic"==e.correctionType?"Logic mistake":e.correctionType,n=e.fix?(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{children:" "}),"â†’",(0,t.jsx)("span",{children:" "}),(0,t.jsx)("span",{className:"p-1.5 bg-blue-600 rounded text-lg text-slate-100",children:e.fix})]}):(0,t.jsx)(t.Fragment,{});let[o,s]=(0,u.useState)([]),[a,i]=(0,u.useState)(!1),[l,c]=(0,u.useState)("");async function h(r){"Enter"===r.key&&""!==l&&(c(""),i(!0),o.push(l),s(o),await d("/api/dialogue",{user_feedback:l,index:e.index,app_id:e.app_id}).then(e=>{o.push(e.feedback),s(o),i(!1)}))}return(0,t.jsxs)("div",{className:"w-96 p-4 m-4 rounded-lg bg-white drop-shadow-lg transition-all duration-300 ease-in-out transform hover:scale-105 hover:shadow-xl hover:bg-gray-50",onClick:()=>e.onClick(),children:[(0,t.jsxs)("div",{className:e.hidden?"hidden":"",children:[(0,t.jsx)("span",{className:"mr-2 text-base text-black before:content-[''] before:border before:rounded-lg before:mr-2 before:border-blue-500 truncate max-w-[60%] inline-block",children:e.error}),(0,t.jsx)("span",{className:"before:content-[''] before:w-1.5 before:h-1.5 before:border before:rounded-full before:inline-flex before:bg-gray-400 before:align-middle before:mt-1 before:mb-1 before:mr-2 text-gray-500 font-thin relative -top-1.5",children:r})]}),(0,t.jsxs)("div",{className:e.hidden?"":"hidden",children:[(0,t.jsx)("span",{className:"ml-1 uppercase text-[9px] text-blue-500 before:content-[''] before:border before:rounded-lg before:mr-2 before:border-blue-500",children:e.correctionType}),(0,t.jsx)("div",{className:"inline-flex"}),(0,t.jsx)("button",{className:"relative -top-2 float-right rounded-lg p-1 hover:bg-gray-200 active:bg-gray-300",onClick:()=>e.deleteSuggestion,children:(0,t.jsx)(p.XHJ,{size:18})}),(0,t.jsxs)("h2",{className:"mt-2 text-lg text-gray-600",children:[(0,t.jsx)("span",{children:"Do you mean: "}),(0,t.jsx)("del",{className:"decoration-red-600",children:e.error}),n]}),(0,t.jsx)("p",{className:"mt-2 mb-3 text-base font-light indent-4",children:e.content}),(0,t.jsx)("div",{className:"border-t border-solid border-gray-200 mt-3 mb-5"}),(0,t.jsx)("div",{className:"grid",children:o.map((e,r)=>(0,t.jsx)("p",{className:"mb-4 p-2 odd:text-white even:text-gray-700 odd:bg-blue-400 even:bg-slate-200 rounded-xl odd:place-self-end even:place-self-start",children:e},r))}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"What's wrong with my content?",className:"w-full p-2 mt-2 border border-solid border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:border-blue-500 hover:outline-none hover:ring-2 hover:ring-blue-500 hover:border-transparent",disabled:a,onKeyDown:h})]})]})}function x(){let e,r,[n,o]=(0,u.useState)(!1),[a,c]=(0,u.useState)(),[p,x]=(0,u.useState)(""),[m,b]=(0,u.useState)([]),[g,f]=(0,u.useState)(-1);async function j(){var r;for((r={},new Promise((e,n)=>{l.Z.get("/api/app_id",{params:r}).then(r=>{e(r.data)}).catch(e=>{console.log(e),n(e)})})).then(r=>{e=r.app_id});!e;)await new Promise(e=>setTimeout(e,500));o(!0),await d("/api/suggestions",{app_id:e,user_prompt:p}).then(e=>{b(e),o(!1)}),1===m.length&&m[0].error&&b([]),m.forEach(e=>{let r=e.problem_sentence.replace(e.incorrect,'<span class="underline bg-red-300 p-1 rounded-lg">'.concat(e.incorrect,"</span>")),n=null==a?void 0:a.innerHTML;a.innerHTML=n.replace(e.problem_sentence,r),c(a)})}return r=n?(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-1 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,t.jsx)(t.Fragment,{}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"WritePro"}),(0,t.jsx)("meta",{name:"description",content:"WritePro"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,t.jsxs)("div",{className:"flex w-full bg-white h-16 drop-shadow-xl mb-6 p-3",children:[(0,t.jsx)(s(),{src:"/favicon.png",alt:"WritePro Icon",width:42,height:100}),(0,t.jsx)("span",{className:"ml-2 text-3xl p-0.5 text-gray-700",children:"WritePro"}),(0,t.jsx)("div",{className:"flex-grow"}),(0,t.jsxs)("button",{className:"bg-blue-500 text-white p-2 rounded-lg",onClick:j,children:[r,n?"Analyzing...":"Analyze"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-12",children:[(0,t.jsx)("div",{className:"col-span-8 p-7",children:(0,t.jsx)("div",{className:"border-2 border-gray-300 p-5 rounded-lg h-max overflow-auto focus-visible:border-gray-400 focus-visible:outline-none",ref:e=>c(e),contentEditable:!0,autoFocus:!0,onInput:function(e){x(e.target.innerText),f(-1),console.log(p),console.log(a)},onPaste:e=>(function(e){e.preventDefault();let r=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,r)})(e)})}),(0,t.jsx)("div",{className:"col-span-4 h-max overflow-auto",children:m.map((r,n)=>(0,t.jsx)(h,{correctionType:r.category,content:r.reason,error:r.incorrect,fix:r.fix,index:r.index,app_id:e,hidden:g===n,deleteSuggestion:()=>{var e;return e=r.index,void m.forEach(r=>{r&&r.index===e&&b(m.slice(m.indexOf(r),1))})},onClick:()=>f(n)},n))})]})]})}}},function(e){e.O(0,[547,737,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);